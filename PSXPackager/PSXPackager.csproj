<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFrameworks>net462;net48;netcoreapp3.1</TargetFrameworks>
    <PublishTrimmed>true</PublishTrimmed>
  </PropertyGroup>


  <ItemGroup>
    <PackageReference Include="CommandLineParser" Version="2.8.0" />
    <PackageReference Include="SevenZipExtractor" Version="1.0.15" />
    <PackageReference Include="System.ValueTuple" Version="4.5.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\DiscUtils.Iso9660\DiscUtils.Iso9660.csproj" />
    <ProjectReference Include="..\Popstation\Popstation.csproj" />
  </ItemGroup>


  <ItemGroup>
    <PackageReference Include="ILMerge" Version="3.0.29" />
  </ItemGroup>

  <Target Name="ILMerge">
    <!-- the ILMergePath property points to the location of ILMerge.exe console application -->
    <Exec Command="$(ILMergeConsolePath) bin\Debug\netcoreapp3.1\PSXPackager.exe ^
/out:PSXPackager2.exe ^
bin\Debug\netcoreapp3.1\CommandLine.dll ^
bin\Debug\netcoreapp3.1\DiscUtils.Core.dll ^
bin\Debug\netcoreapp3.1\DiscUtils.Iso9660.dll ^
bin\Debug\netcoreapp3.1\DiscUtils.Streams.dll ^
bin\Debug\netcoreapp3.1\ICSharpCode.SharpZipLib.dll ^
bin\Debug\netcoreapp3.1\Popstation.dll ^
bin\Debug\netcoreapp3.1\PSXPackager.dll ^
bin\Debug\netcoreapp3.1\SevenZipExtractor.dll ^
bin\Debug\netcoreapp3.1\System.ValueTuple.dll" />
  </Target>

</Project>
